<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DPDK vHost User Ports &mdash; Open vSwitch 2.6.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Open vSwitch 2.6.0 documentation" href="../../index.html" />
    <link rel="up" title="The DPDK Datapath" href="index.html" />
    <link rel="next" title="OVS-on-Hyper-V Design" href="../windows.html" />
    <link rel="prev" title="The DPDK Datapath" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../windows.html" title="OVS-on-Hyper-V Design"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="The DPDK Datapath"
             accesskey="P">previous</a> |</li>
        <li><a href="../../contents.html">Open vSwitch 2.6.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Open vSwitch Deep Dive</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">The DPDK Datapath</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dpdk-vhost-user-ports">
<h1>DPDK vHost User Ports<a class="headerlink" href="#dpdk-vhost-user-ports" title="Permalink to this headline">¶</a></h1>
<p>The DPDK datapath provides DPDK-backed vHost user ports as a primary way to
interact with guests. For more information on vHost User, refer to the <a class="reference external" href="http://git.qemu-project.org/?p=qemu.git;a=blob;f=docs/specs/vhost-user.txt;h=7890d7169;hb=HEAD">QEMU
documentation</a> on same.</p>
<div class="section" id="quick-example">
<h2>Quick Example<a class="headerlink" href="#quick-example" title="Permalink to this headline">¶</a></h2>
<p>This example demonstrates how to add two <tt class="docutils literal"><span class="pre">dpdkvhostuser</span></tt> ports to an existing
bridge called <tt class="docutils literal"><span class="pre">br0</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ovs-vsctl add-port br0 dpdkvhostuser0 \
    -- set Interface dpdkvhostuser0 type=dpdkvhostuser
$ ovs-vsctl add-port br0 dpdkvhostuser1 \
    -- set Interface dpdkvhostuser1 type=dpdkvhostuser
</pre></div>
</div>
</div>
<div class="section" id="vhost-user-vs-vhost-user-client">
<h2>vhost-user vs. vhost-user-client<a class="headerlink" href="#vhost-user-vs-vhost-user-client" title="Permalink to this headline">¶</a></h2>
<p>Open vSwitch provides two types of vHost User ports:</p>
<ul class="simple">
<li>vhost-user (<tt class="docutils literal"><span class="pre">dpdkvhostuser</span></tt>)</li>
<li>vhost-user-client (<tt class="docutils literal"><span class="pre">dpdkvhostuserclient</span></tt>)</li>
</ul>
<p>vHost User uses a client-server model. The server creates/manages/destroys the
vHost User sockets, and the client connects to the server. Depending on which
port type you use, <tt class="docutils literal"><span class="pre">dpdkvhostuser</span></tt> or <tt class="docutils literal"><span class="pre">dpdkvhostuserclient</span></tt>, a different
configuration of the client-server model is used.</p>
<p>For vhost-user ports, Open vSwitch acts as the server and QEMU the client.  For
vhost-user-client ports, Open vSwitch acts as the client and QEMU the server.</p>
</div>
<div class="section" id="vhost-user">
<span id="dpdk-vhost-user"></span><h2>vhost-user<a class="headerlink" href="#vhost-user" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Use of vhost-user ports requires QEMU &gt;= 2.2</p>
</div>
<p>To use vhost-user ports, you must first add said ports to the switch. Unlike
DPDK ring ports, DPDK vhost-user ports can have arbitrary names, except that
forward and backward slashes are prohibited in the names. For vhost-user, the
port type is <tt class="docutils literal"><span class="pre">dpdkvhostuser</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ovs-vsctl add-port br0 vhost-user-1 -- set Interface vhost-user-1 \
    type=dpdkvhostuser
</pre></div>
</div>
<p>This action creates a socket located at
<tt class="docutils literal"><span class="pre">/usr/local/var/run/openvswitch/vhost-user-1</span></tt>, which you must provide to your
VM on the QEMU command line.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you wish for the vhost-user sockets to be created in a sub-directory of
<tt class="docutils literal"><span class="pre">/usr/local/var/run/openvswitch</span></tt>, you may specify this directory in the
ovsdb like so:</p>
<div class="last highlight-python"><div class="highlight"><pre>$ ovs-vsctl --no-wait \
    set Open_vSwitch . other_config:vhost-sock-dir=subdir
</pre></div>
</div>
</div>
<p>Once the vhost-user ports have been added to the switch, they must be added to
the guest. There are two ways to do this: using QEMU directly, or using
libvirt.</p>
<div class="section" id="adding-vhost-user-ports-to-the-guest-qemu">
<h3>Adding vhost-user ports to the guest (QEMU)<a class="headerlink" href="#adding-vhost-user-ports-to-the-guest-qemu" title="Permalink to this headline">¶</a></h3>
<p>To begin, you must attach the vhost-user device sockets to the guest. To do
this, you must pass the following parameters to QEMU:</p>
<div class="highlight-python"><div class="highlight"><pre>-chardev socket,id=char1,path=/usr/local/var/run/openvswitch/vhost-user-1
-netdev type=vhost-user,id=mynet1,chardev=char1,vhostforce
-device virtio-net-pci,mac=00:00:00:00:00:01,netdev=mynet1
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">vhost-user-1</span></tt> is the name of the vhost-user port added to the switch.</p>
<p>Repeat the above parameters for multiple devices, changing the chardev <tt class="docutils literal"><span class="pre">path</span></tt>
and <tt class="docutils literal"><span class="pre">id</span></tt> as necessary. Note that a separate and different chardev <tt class="docutils literal"><span class="pre">path</span></tt>
needs to be specified for each vhost-user device. For example you have a second
vhost-user port named <tt class="docutils literal"><span class="pre">vhost-user-2</span></tt>, you append your QEMU command line with
an additional set of parameters:</p>
<div class="highlight-python"><div class="highlight"><pre>-chardev socket,id=char2,path=/usr/local/var/run/openvswitch/vhost-user-2
-netdev type=vhost-user,id=mynet2,chardev=char2,vhostforce
-device virtio-net-pci,mac=00:00:00:00:00:02,netdev=mynet2
</pre></div>
</div>
<p>In addition,       QEMU must allocate the VM&#8217;s memory on hugetlbfs. vhost-user
ports access a virtio-net device&#8217;s virtual rings and packet buffers mapping the
VM&#8217;s physical memory on hugetlbfs. To enable vhost-user ports to map the VM&#8217;s
memory into their process address space, pass the following parameters to
QEMU:</p>
<div class="highlight-python"><div class="highlight"><pre>-object memory-backend-file,id=mem,size=4096M,mem-path=/dev/hugepages,share=on
-numa node,memdev=mem -mem-prealloc
</pre></div>
</div>
<p>Finally, you may wish to enable multiqueue support. This is optional but,
should you wish to enable it, run:</p>
<div class="highlight-python"><div class="highlight"><pre>-chardev socket,id=char2,path=/usr/local/var/run/openvswitch/vhost-user-2
-netdev type=vhost-user,id=mynet2,chardev=char2,vhostforce,queues=$q
-device virtio-net-pci,mac=00:00:00:00:00:02,netdev=mynet2,mq=on,vectors=$v
</pre></div>
</div>
<p>where:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">$q</span></tt></dt>
<dd>The number of queues</dd>
<dt><tt class="docutils literal"><span class="pre">$v</span></tt></dt>
<dd>The number of vectors, which is <tt class="docutils literal"><span class="pre">$q</span></tt> * 2 + 2</dd>
</dl>
<p>The vhost-user interface will be automatically reconfigured with required
number of rx and tx queues after connection of virtio device.  Manual
configuration of <tt class="docutils literal"><span class="pre">n_rxq</span></tt> is not supported because OVS will work properly only
if <tt class="docutils literal"><span class="pre">n_rxq</span></tt> will match number of queues configured in QEMU.</p>
<p>A least 2 PMDs should be configured for the vswitch when using multiqueue.
Using a single PMD will cause traffic to be enqueued to the same vhost queue
rather than being distributed among different vhost queues for a vhost-user
interface.</p>
<p>If traffic destined for a VM configured with multiqueue arrives to the vswitch
via a physical DPDK port, then the number of rxqs should also be set to at
least 2 for that physical DPDK port. This is required to increase the
probability that a different PMD will handle the multiqueue transmission to the
guest using a different vhost queue.</p>
<p>If one wishes to use multiple queues for an interface in the guest, the driver
in the guest operating system must be configured to do so. It is recommended
that the number of queues configured be equal to <tt class="docutils literal"><span class="pre">$q</span></tt>.</p>
<p>For example, this can be done for the Linux kernel virtio-net driver with:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ethtool -L &lt;DEV&gt; combined &lt;$q&gt;
</pre></div>
</div>
<p>where:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-L</span></tt></dt>
<dd>Changes the numbers of channels of the specified network device</dd>
<dt><tt class="docutils literal"><span class="pre">combined</span></tt></dt>
<dd>Changes the number of multi-purpose channels.</dd>
</dl>
</div>
<div class="section" id="adding-vhost-user-ports-to-the-guest-libvirt">
<h3>Adding vhost-user ports to the guest (libvirt)<a class="headerlink" href="#adding-vhost-user-ports-to-the-guest-libvirt" title="Permalink to this headline">¶</a></h3>
<p>To begin, you must change the user and group that libvirt runs under, configure
access control policy and restart libvirtd.</p>
<ul>
<li><p class="first">In <tt class="docutils literal"><span class="pre">/etc/libvirt/qemu.conf</span></tt> add/edit the following lines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">user</span> <span class="o">=</span> <span class="s">&quot;root&quot;</span>
<span class="n">group</span> <span class="o">=</span> <span class="s">&quot;root&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">Disable SELinux or set to permissive mode:</p>
<div class="highlight-python"><div class="highlight"><pre>$ setenforce 0
</pre></div>
</div>
</li>
<li><p class="first">Finally, restart the libvirtd process, For example, on Fedora:</p>
<div class="highlight-python"><div class="highlight"><pre>$ systemctl restart libvirtd.service
</pre></div>
</div>
</li>
</ul>
<p>Once complete, instantiate the VM. A sample XML configuration file is provided
at the <a class="reference internal" href="#dpdk-vhost-user-xml"><em>end of this file</em></a>. Save this file, then
create a VM using this file:</p>
<div class="highlight-python"><div class="highlight"><pre>$ virsh create demovm.xml
</pre></div>
</div>
<p>Once created, you can connect to the guest console:</p>
<div class="highlight-python"><div class="highlight"><pre>$ virsh console demovm
</pre></div>
</div>
<p>The demovm xml configuration is aimed at achieving out of box performance on
VM. These enhancements include:</p>
<ul class="simple">
<li>The vcpus are pinned to the cores of the CPU socket 0 using <tt class="docutils literal"><span class="pre">vcpupin</span></tt>.</li>
<li>Configure NUMA cell and memory shared using <tt class="docutils literal"><span class="pre">memAccess='shared'</span></tt>.</li>
<li>Disable <tt class="docutils literal"><span class="pre">mrg_rxbuf='off'</span></tt></li>
</ul>
<p>Refer to the <a class="reference external" href="http://libvirt.org/formatdomain.html">libvirt documentation</a>
for more information.</p>
</div>
</div>
<div class="section" id="vhost-user-client">
<span id="dpdk-vhost-user-client"></span><h2>vhost-user-client<a class="headerlink" href="#vhost-user-client" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Use of vhost-user ports requires QEMU &gt;= 2.7</p>
</div>
<p>To use vhost-user-client ports, you must first add said ports to the switch.
Like DPDK vhost-user ports, DPDK vhost-user-client ports can have mostly
arbitrary names. However, the name given to the port does not govern the name
of the socket device. Instead, this must be configured by the user by way of a
<tt class="docutils literal"><span class="pre">vhost-server-path</span></tt> option. For vhost-user-client, the port type is
<tt class="docutils literal"><span class="pre">dpdkvhostuserclient</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ VHOST_USER_SOCKET_PATH=/path/to/socket
$ ovs-vsctl add-port br0 vhost-client-1 \
    -- set Interface vhost-client-1 type=dpdkvhostuserclient \
         options:vhost-server-path=$VHOST_USER_SOCKET_PATH
</pre></div>
</div>
<p>Once the vhost-user-client ports have been added to the switch, they must be
added to the guest. Like vhost-user ports, there are two ways to do this: using
QEMU directly, or using libvirt. Only the QEMU case is covered here.</p>
<div class="section" id="adding-vhost-user-client-ports-to-the-guest-qemu">
<h3>Adding vhost-user-client ports to the guest (QEMU)<a class="headerlink" href="#adding-vhost-user-client-ports-to-the-guest-qemu" title="Permalink to this headline">¶</a></h3>
<p>Attach the vhost-user device sockets to the guest. To do this, you must pass
the following parameters to QEMU:</p>
<div class="highlight-python"><div class="highlight"><pre>-chardev socket,id=char1,path=$VHOST_USER_SOCKET_PATH,server
-netdev type=vhost-user,id=mynet1,chardev=char1,vhostforce
-device virtio-net-pci,mac=00:00:00:00:00:01,netdev=mynet1
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">vhost-user-1</span></tt> is the name of the vhost-user port added to the switch.</p>
<p>If the corresponding <tt class="docutils literal"><span class="pre">dpdkvhostuserclient</span></tt> port has not yet been configured
in OVS with <tt class="docutils literal"><span class="pre">vhost-server-path=/path/to/socket</span></tt>, QEMU will print a log
similar to the following:</p>
<div class="highlight-python"><div class="highlight"><pre>QEMU waiting for connection on: disconnected:unix:/path/to/socket,server
</pre></div>
</div>
<p>QEMU will wait until the port is created sucessfully in OVS to boot the VM.
One benefit of using this mode is the ability for vHost ports to &#8216;reconnect&#8217; in
event of the switch crashing or being brought down. Once it is brought back up,
the vHost ports will reconnect automatically and normal service will resume.</p>
</div>
</div>
<div class="section" id="dpdk-in-the-guest">
<span id="dpdk-testpmd"></span><h2>DPDK in the Guest<a class="headerlink" href="#dpdk-in-the-guest" title="Permalink to this headline">¶</a></h2>
<p>The DPDK <tt class="docutils literal"><span class="pre">testpmd</span></tt> application can be run in guest VMs for high speed packet
forwarding between vhostuser ports. DPDK and testpmd application has to be
compiled on the guest VM. Below are the steps for setting up the testpmd
application in the VM.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Support for DPDK in the guest requires QEMU &gt;= 2.2</p>
</div>
<p>To begin, instantiate a guest as described in <a class="reference internal" href="#dpdk-vhost-user"><em>vhost-user</em></a> or
<a class="reference internal" href="#dpdk-vhost-user-client"><em>vhost-user-client</em></a>. Once started, connect to the VM, download the
DPDK sources to VM and build DPDK:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd /root/dpdk/
$ wget http://fast.dpdk.org/rel/dpdk-16.11.2.tar.xz
$ tar xf dpdk-16.11.2.tar.xz
$ export DPDK_DIR=/root/dpdk/dpdk-stable-16.11.2
$ export DPDK_TARGET=x86_64-native-linuxapp-gcc
$ export DPDK_BUILD=$DPDK_DIR/$DPDK_TARGET
$ cd $DPDK_DIR
$ make install T=$DPDK_TARGET DESTDIR=install
</pre></div>
</div>
<p>Build the test-pmd application:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd app/test-pmd
$ export RTE_SDK=$DPDK_DIR
$ export RTE_TARGET=$DPDK_TARGET
$ make
</pre></div>
</div>
<p>Setup huge pages and DPDK devices using UIO:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sysctl vm.nr_hugepages=1024
$ mkdir -p /dev/hugepages
$ mount -t hugetlbfs hugetlbfs /dev/hugepages  # only if not already mounted
$ modprobe uio
$ insmod $DPDK_BUILD/kmod/igb_uio.ko
$ $DPDK_DIR/tools/dpdk-devbind.py --status
$ $DPDK_DIR/tools/dpdk-devbind.py -b igb_uio 00:03.0 00:04.0
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>vhost ports pci ids can be retrieved using:</p>
<div class="last highlight-python"><div class="highlight"><pre>lspci | grep Ethernet
</pre></div>
</div>
</div>
<p>Finally, start the application:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># TODO</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-xml">
<span id="dpdk-vhost-user-xml"></span><h2>Sample XML<a class="headerlink" href="#sample-xml" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>&lt;domain type=&#39;kvm&#39;&gt;
  &lt;name&gt;demovm&lt;/name&gt;
  &lt;uuid&gt;4a9b3f53-fa2a-47f3-a757-dd87720d9d1d&lt;/uuid&gt;
  &lt;memory unit=&#39;KiB&#39;&gt;4194304&lt;/memory&gt;
  &lt;currentMemory unit=&#39;KiB&#39;&gt;4194304&lt;/currentMemory&gt;
  &lt;memoryBacking&gt;
    &lt;hugepages&gt;
      &lt;page size=&#39;2&#39; unit=&#39;M&#39; nodeset=&#39;0&#39;/&gt;
    &lt;/hugepages&gt;
  &lt;/memoryBacking&gt;
  &lt;vcpu placement=&#39;static&#39;&gt;2&lt;/vcpu&gt;
  &lt;cputune&gt;
    &lt;shares&gt;4096&lt;/shares&gt;
    &lt;vcpupin vcpu=&#39;0&#39; cpuset=&#39;4&#39;/&gt;
    &lt;vcpupin vcpu=&#39;1&#39; cpuset=&#39;5&#39;/&gt;
    &lt;emulatorpin cpuset=&#39;4,5&#39;/&gt;
  &lt;/cputune&gt;
  &lt;os&gt;
    &lt;type arch=&#39;x86_64&#39; machine=&#39;pc&#39;&gt;hvm&lt;/type&gt;
    &lt;boot dev=&#39;hd&#39;/&gt;
  &lt;/os&gt;
  &lt;features&gt;
    &lt;acpi/&gt;
    &lt;apic/&gt;
  &lt;/features&gt;
  &lt;cpu mode=&#39;host-model&#39;&gt;
    &lt;model fallback=&#39;allow&#39;/&gt;
    &lt;topology sockets=&#39;2&#39; cores=&#39;1&#39; threads=&#39;1&#39;/&gt;
    &lt;numa&gt;
      &lt;cell id=&#39;0&#39; cpus=&#39;0-1&#39; memory=&#39;4194304&#39; unit=&#39;KiB&#39; memAccess=&#39;shared&#39;/&gt;
    &lt;/numa&gt;
  &lt;/cpu&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/bin/qemu-kvm&lt;/emulator&gt;
    &lt;disk type=&#39;file&#39; device=&#39;disk&#39;&gt;
      &lt;driver name=&#39;qemu&#39; type=&#39;qcow2&#39; cache=&#39;none&#39;/&gt;
      &lt;source file=&#39;/root/CentOS7_x86_64.qcow2&#39;/&gt;
      &lt;target dev=&#39;vda&#39; bus=&#39;virtio&#39;/&gt;
    &lt;/disk&gt;
    &lt;disk type=&#39;dir&#39; device=&#39;disk&#39;&gt;
      &lt;driver name=&#39;qemu&#39; type=&#39;fat&#39;/&gt;
      &lt;source dir=&#39;/usr/src/dpdk-stable-16.11.2&#39;/&gt;
      &lt;target dev=&#39;vdb&#39; bus=&#39;virtio&#39;/&gt;
      &lt;readonly/&gt;
    &lt;/disk&gt;
    &lt;interface type=&#39;vhostuser&#39;&gt;
      &lt;mac address=&#39;00:00:00:00:00:01&#39;/&gt;
      &lt;source type=&#39;unix&#39; path=&#39;/usr/local/var/run/openvswitch/dpdkvhostuser0&#39; mode=&#39;client&#39;/&gt;
       &lt;model type=&#39;virtio&#39;/&gt;
      &lt;driver queues=&#39;2&#39;&gt;
        &lt;host mrg_rxbuf=&#39;off&#39;/&gt;
      &lt;/driver&gt;
    &lt;/interface&gt;
    &lt;interface type=&#39;vhostuser&#39;&gt;
      &lt;mac address=&#39;00:00:00:00:00:02&#39;/&gt;
      &lt;source type=&#39;unix&#39; path=&#39;/usr/local/var/run/openvswitch/dpdkvhostuser1&#39; mode=&#39;client&#39;/&gt;
      &lt;model type=&#39;virtio&#39;/&gt;
      &lt;driver queues=&#39;2&#39;&gt;
        &lt;host mrg_rxbuf=&#39;off&#39;/&gt;
      &lt;/driver&gt;
    &lt;/interface&gt;
    &lt;serial type=&#39;pty&#39;&gt;
      &lt;target port=&#39;0&#39;/&gt;
    &lt;/serial&gt;
    &lt;console type=&#39;pty&#39;&gt;
      &lt;target type=&#39;serial&#39; port=&#39;0&#39;/&gt;
    &lt;/console&gt;
  &lt;/devices&gt;
&lt;/domain&gt;
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../contents.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DPDK vHost User Ports</a><ul>
<li><a class="reference internal" href="#quick-example">Quick Example</a></li>
<li><a class="reference internal" href="#vhost-user-vs-vhost-user-client">vhost-user vs. vhost-user-client</a></li>
<li><a class="reference internal" href="#vhost-user">vhost-user</a><ul>
<li><a class="reference internal" href="#adding-vhost-user-ports-to-the-guest-qemu">Adding vhost-user ports to the guest (QEMU)</a></li>
<li><a class="reference internal" href="#adding-vhost-user-ports-to-the-guest-libvirt">Adding vhost-user ports to the guest (libvirt)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vhost-user-client">vhost-user-client</a><ul>
<li><a class="reference internal" href="#adding-vhost-user-client-ports-to-the-guest-qemu">Adding vhost-user-client ports to the guest (QEMU)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dpdk-in-the-guest">DPDK in the Guest</a></li>
<li><a class="reference internal" href="#sample-xml">Sample XML</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">The DPDK Datapath</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../windows.html"
                        title="next chapter">OVS-on-Hyper-V Design</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/topics/dpdk/vhost-user.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../windows.html" title="OVS-on-Hyper-V Design"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="The DPDK Datapath"
             >previous</a> |</li>
        <li><a href="../../contents.html">Open vSwitch 2.6.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Open vSwitch Deep Dive</a> &raquo;</li>
          <li><a href="index.html" >The DPDK Datapath</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, The Open vSwitch Development Community.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>